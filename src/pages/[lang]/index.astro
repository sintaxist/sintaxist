---
import Layout from "@/layouts/Layout.astro";

import HeroSection from "@/sections/HeroSection.astro";
import AboutSection from "@/sections/AboutSection.astro";
import ContactSection from "@/sections/ContactSection.astro";

import { LANGUAGES, defaultLang, type AppLocale } from "@/locales";
import ExperiencieSkillsSection from "@/sections/ExperiencieSkillsSection.astro";
import ProjectsSection from "@/sections/ProjectsSection.astro";

export async function getStaticPaths() {
  const paths = [];

  for (const lang of Object.keys(LANGUAGES)) {
    const t = LANGUAGES[lang].translations;

    const filteredProjects = t.projectsPage.projects
      .slice(0, 6)
      .map((p) => ({
        slug: p.slug,
        title: p.title,
        description: p.description,
        categoryIds: p.categoryIds,
        imgSrc: p.imgSrc,
        viewMore: t.projectsPage.viewMore,
      }));

    const projectsPage = {
      title: t.projectsPage.title,
      description: t.projectsPage.description,
      ctaAllProjects: t.projectsPage.ctaAllProjects,
      categories: t.projectsPage.categories,
      projects: filteredProjects,
    };

    paths.push({
      params: { lang },
      props: {
        lang,
        header: t.header,
        hero: t.hero,
        about: t.about,
        experience: t.experience,
        skills: t.skills,
        contact: t.contact,
        socials: t.socials,
        footer: t.footer,
        sections: t.sections,
        projectsPage,
      },
    });
  }

  return paths;
}

const {
  lang,
  header,
  hero,
  about,
  experience,
  skills,
  contact,
  socials,
  footer,
  projectsPage,
  sections,
} = Astro.props;
---

<Layout
  title="Alejandro Canek - UX Engineer"
  description="Diseñador UX/UI & desarrolador Frontend enfocado en crear experiencias digitales con propósito, estrategia y alto impacto visual."
  headerInfo={header}
  sections={sections}
  footerInfo={footer}
>
  <HeroSection t={hero} socials={socials} />
  <AboutSection t={about} />
  <ProjectsSection t={projectsPage} {lang} />
  <ExperiencieSkillsSection experience={experience} skills={skills} />
  <ContactSection t={contact} socials={socials} />
</Layout>
