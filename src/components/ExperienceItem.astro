---
import IconBriefcase from "@/icons/IconBriefcase.astro";
import IconGendra from "@/icons/IconGendra.astro";
import IconMinsait from "@/icons/IconMinsait.astro";
import IconPayvalida from "@/icons/IconPayvalida.astro";
import IconYoorco from "@/icons/IconYoorco.astro";

const { job, isLast = false } = Astro.props;

const iconMap = {
  payvalida: IconPayvalida,
  minsait: IconMinsait,
  gendra: IconGendra,
  yoorco: IconYoorco,
  xochimaco: IconBriefcase,
};

const IconComponent = iconMap[job.icon?.toLowerCase()] || IconBriefcase;
---

<div class="experience-item relative flex gap-4 md:gap-10 w-full">
  
  {!isLast && (
    <div class="timeline-line hidden linexs:block absolute left-[6.5px] sm:left-[11.5px] md:left-[40px] top-[15px] sm:top-[25px] md:top-[80px] w-0.5 h-[calc(100%+33px)] sm:h-[calc(100%+25px)] md:h-[calc(100%-14px)] bg-secondary"></div>
  )}

  <div class="timeline-icon hidden linexs:flex items-center justify-center w-[15px] sm:w-[25px] md:w-[80px] h-[15px] sm:h-[25px] md:h-[80px] min-w-[15px] sm:min-w-[25px] md:min-w-[80px] border-2 rounded-full border-secondary">
    <IconComponent class="hidden md:block w-9 h-9" />
  </div>

  <div class="flex flex-col gap-2 md:gap-4 w-full">
    <h3 class="font-primary text-3xl md:text-4xl">{job.company}</h3>
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 md:gap-4">
      <h4 class="font-secondary font-bold text-sm xs:text-base sm:text-md md:text-lg underline">{job.role}</h4>
      <p class="font-secondary font-bold text-sm xs:text-base sm:text-md md:text-lg">{job.dates}</p>
    </div>
    <ul class="list-disc pl-5 space-y-2 font-secondary mt-2">
      {job.tasks.map(task => <li class="font-secondary font-normal text-sm xs:text-base sm:text-md md:text-lg">{task}</li>)}
    </ul>
  </div>
</div>