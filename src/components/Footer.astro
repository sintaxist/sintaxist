---
import AnimatedLogo from "./AnimatedLogo.astro";

const currentYear = new Date().getFullYear();

const menuItems = [
  { id: "demos", label: "Demos" },
  { id: "features", label: "Features" },
  { id: "sobre-mi", label: "Nosotros" },
  { id: "paquetes", label: "Paquetes" },
  { id: "contacto", label: "Contacto" },
];
---

<footer
  class="py-16 pb-8 px-6 relative bg-primary backdrop-blur-xl"
>
  <div class="max-w-7xl mx-auto">
    <div class="grid md:grid-cols-3 gap-8 mb-12">
      <div>
        <p class="mt-4 text-primary leading-relaxed max-w-sm">
          Experiencias digitales que convierten cada evento en un recuerdo
          inolvidable.
        </p>
      </div>

      <div>
        <h4 class="  font-semibold text-lg text-primary mb-4">
          Navegación
        </h4>
        <ul class="space-y-2">
          {
            menuItems.map((item) => (
              <li>
                <a
                  href={`#${item.id}`}
                  class="link-style   text-primary transition-colors cursor-pointer"
                >
                  {item.label}
                </a>
              </li>
            ))
          }
        </ul>
      </div>


      <div>
        <h4 class="  font-semibold text-lg text-primary mb-4">
          Conecta con Mömenta
        </h4>
        <ul class="space-y-2 text-sm  ">
          <li>
            <a
              href="mailto:contacto@momentainvitaciones.com.mx"
              class="link-style text-primary transition-colors cursor-pointer overflow-hidden text-ellipsis"
            >
              contacto@momentainvitaciones.com.mx
            </a>
          </li>
          <li>
            <a
              href="https://wa.me/525533256703?text=Hola%2C%20quiero%20hablar%20sobre%20mi%20evento"
              class="link-style text-primary transition-colors cursor-pointer"
            >
              +52 (55) 3325 6703
            </a>
          </li>
          <p class="text-gray-500">Ciudad de México, México</p>
        </ul>
      </div>

    </div>

    <div
      class="pt-8 border-t border-gray-200 flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0"
    >
      <p class="  text-gray-500 text-sm text-center">
        © {currentYear} Mömenta. Hecho con corazón para eventos extraordinarios.
      </p>
      <div class="flex space-x-6 text-sm  ">
        <a
          href="/politica-de-cookies"
          class="link-style text-gray-500 hover:text-gray-700 transition-colors"
          >Politica de cookies</a
        >
      </div>
    </div>
  </div>
</footer>
<style>
  .link-style {
    position: relative;
  }

  .link-style:before {
    content: "";
    width: 0;
    height: 2px;
    background-color: #4f39f6;
    position: absolute;
    bottom: -3px;
    border-radius: 100px;
    transition: width 0.3s;
  }

  .link-style:hover {
    color: #4f39f6;
  }

  .link-style:hover:before {
    width: 100%;
  }
</style>
<script>
  // Reusar smoothScroll del header
  function smoothScroll(target: any, targetId: any) {
    const start = window.scrollY;
    const end = target.getBoundingClientRect().top + window.scrollY - 60;
    const duration = 50; // más suave para footer
    let startTime: any = null;

    function easeInOutQuad(t: any) {
      return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
    }

    function animation(currentTime: any) {
      if (startTime === null) startTime = currentTime;
      const timeElapsed = currentTime - startTime;
      const progress = Math.min(timeElapsed / duration, 1);
      const run = start + (end - start) * easeInOutQuad(progress);
      window.scrollTo(0, run);
      if (timeElapsed < duration) {
        requestAnimationFrame(animation);
      }
    }

    requestAnimationFrame(animation);
  }

  document.addEventListener("DOMContentLoaded", () => {
    const footerLinks = document.querySelectorAll("footer a[href^='#']");

    footerLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        const href = link.getAttribute("href");
        const targetId = href ? href.substring(1) : null;
        if (!targetId) return;

        const targetEl = document.getElementById(targetId);

        if (window.location.pathname === "/" && targetEl) {
          e.preventDefault();
          smoothScroll(targetEl, targetId);
        } else {
          // Si no estamos en home, manda a home con hash
          link.setAttribute("href", `/#${targetId}`);
        }
      });
    });
  });
</script>
